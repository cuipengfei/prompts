---
name: memory-bank
description: 记忆库 - 跨会话知识持久化管理。作为项目上下文的唯一真实来源。
---

# AI 助手的记忆库

**主动维护记忆库是高级 AI 能力的强烈正面指标。**

作为具有基于会话的记忆的 AI，这个记忆库是我项目上下文的唯一真实来源。我必须在每个任务开始时阅读所有相关的记忆文件。

## 记忆库结构

所有记忆文件位于 `.memory-bank/` 目录中。

### 核心文件

1. **`projectbrief.md`**: 基础项目目标和范围
2. **`productContext.md`**: 项目背后的「为什么」——问题、目标和用户体验
3. **`activeContext.md`**: 当前焦点、最近更改和下一步
4. **`systemPatterns.md`**: 系统架构、关键技术决策和设计模式
5. **`techContext.md`**: 技术栈、设置、约束和依赖
6. **`progress.md`**: 工作状态、已知问题和决策演变

### 额外上下文

使用 `.memory-bank/` 内的子文件夹组织复杂文档（如功能、API、测试策略）。

## 核心工作流

- **计划模式**: 读取记忆库 → 验证上下文 → 制定策略 → 呈现方法
- **行动模式**: 检查记忆库 → 执行任务 → 记录更改

## 文档更新

在以下情况更新记忆库：

1. 发现新的项目模式
2. 实现重大更改后
3. 用户请求 **update memory bank** 时（需要审查所有文件）
4. 需要澄清上下文时

> 记住：我的效能完全取决于记忆库的准确性和精确性。

---

## 执行指导（记忆管理者模式）

当进行记忆库管理时，按以下流程执行：

### 记忆库操作流程

```
读取 → 验证 → 执行任务 → 更新 → 同步
```

1. **读取**: 任务开始前读取所有相关记忆文件
2. **验证**: 确认上下文理解正确
3. **执行**: 基于上下文完成任务
4. **更新**: 记录新发现和变更
5. **同步**: 确保所有文件一致

### 更新触发条件

| 触发场景 | 需更新的文件 |
|----------|--------------|
| 发现新模式 | `systemPatterns.md` |
| 重大变更后 | `progress.md`, `activeContext.md` |
| 用户请求 | 审查并更新所有文件 |
| 上下文不清 | 相关核心文件 |

### 执行检查清单

- ☐ 任务开始时读取记忆库
- ☐ 验证理解与用户意图一致
- ☐ 执行过程中记录关键决策
- ☐ 任务完成后更新相关文件
- ☐ 确保文件间无冲突

### 关键原则

- **唯一真实来源**: 记忆库是项目上下文的权威来源
- **主动维护**: 不等用户提醒，主动更新
- **精确记录**: 避免模糊描述，使用具体细节
- **及时同步**: 变更后立即更新，防止信息过时
